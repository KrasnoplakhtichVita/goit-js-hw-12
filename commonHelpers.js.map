{"version":3,"file":"commonHelpers.js","sources":["../src/img/icon.svg","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__65a791c1__\"","export function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"gallery-thumb\">\n              <div class=\"thumb\">\n                <h2 class=\"thumb-title\">Likes</h2>\n                <p class=\"thumb-description\">${likes}</p>\n              </div>\n              <div class=\"thumb\">\n                <h2 class=\"thumb-title\">Views</h2>\n                <p class=\"thumb-description\">${views}</p>\n              </div>\n              <div class=\"thumb\">\n                <h2 class=\"thumb-title\">Comments</h2>\n                <p class=\"thumb-description\">${comments}</p>\n              </div>\n              <div class=\"thumb\">\n                <h2 class=\"thumb-title\">Downloads</h2>\n                <p class=\"thumb-description\">${downloads}</p>\n              </div>\n            </div>\n          </a>\n        </li>`\n    )\n    .join('');\n}\n","import axios from 'axios';\n\nexport let page = 1;\nexport let per_page = 15;\n\nexport async function fetchImages(key, value) {\n  const searchParams = new URLSearchParams({\n    key: key,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: per_page,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n  const imagesObj = await response.data;\n  return imagesObj;\n}\n\nexport function resetPage() {\n  page = 1;\n}\n\nexport function renderPage() {\n  page += 1;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport icon from './img/icon.svg';\n\nimport { createMarkup } from './js/render-functions';\nimport {\n  fetchImages,\n  page,\n  per_page,\n  renderPage,\n  resetPage,\n} from './js/pixabay-api';\n\nconst form = document.querySelector('.form');\nconst list = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-button');\n\nconst FETCH_KEY = '42531953-f4fd7fd73c35883c60e461dd3';\n\nlet inputValue = form.elements.input;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', onBtnSubmit);\n\nasync function onBtnSubmit(evt) {\n  evt.preventDefault();\n\n  loader.classList.remove('hidden');\n  loadBtn.classList.add('hidden');\n\n  resetPage();\n  list.innerHTML = '';\n  inputValue = evt.target.input.value;\n\n  try {\n    const data = await fetchImages(FETCH_KEY, inputValue);\n    form.reset();\n    loader.classList.add('hidden');\n\n    if (!data.hits.length) {\n      return iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: 'white',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n        iconUrl: icon,\n      });\n    }\n\n    list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    lightbox.refresh();\n\n    checkLoadingImages(data);\n    loadBtn.classList.remove('hidden');\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nloadBtn.addEventListener('click', onBtnLoad);\n\nasync function onBtnLoad() {\n  renderPage();\n\n  loadBtn.classList.add('hidden');\n  loader.classList.remove('hidden');\n\n  try {\n    const data = await fetchImages(FETCH_KEY, inputValue);\n    loadBtn.classList.remove('hidden');\n    loader.classList.add('hidden');\n\n    list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    lightbox.refresh();\n\n    checkLoadingImages(data);\n\n    const cardHeight = list.firstChild.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction checkLoadingImages(data) {\n  const totalPages = Math.ceil(data.totalHits / per_page);\n\n  if (page >= totalPages) {\n    loadBtn.classList.add('hidden');\n    return iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      messageColor: 'white',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      iconUrl: icon,\n    });\n  }\n}\n"],"names":["icon","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","page","per_page","fetchImages","key","value","searchParams","axios","resetPage","renderPage","form","list","loader","loadBtn","FETCH_KEY","inputValue","lightbox","SimpleLightbox","onBtnSubmit","evt","data","iziToast","checkLoadingImages","error","onBtnLoad","cardHeight","totalPages"],"mappings":"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"}